<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>09-Execrise</title>
</head>
<body>

    <button>9a</button>
    <button class="js-9b">9b</button>
    <p></p>
    <button onclick="selection(event)">Heads</button>
    <button onclick="selection(event)">Tails</button>
    <p class="js-selected"></p>
    <p></p>

    <input type="text" id="input" placeholder="Enter your name" onkeydown="handleSubmitKeydown(event)">
    <button onclick="greet()">Submit</button>
    <p class="js-greet"></p>
    <p>
        Challenge Exercise
    </p>

    <p>Amazon Shipping Calculator</p>
    <input class="js-amount" type="number" placeholder="Enter Amount" onkeydown="handleCostKeydown(event);">
    <button onclick="calculateShipping();">
        Calculate  
    </button>

    <p class="js-total"></p>
    <p>
        9h
    </p>

    <input type="text" id="input-text" placeholder="Enter something" onkeyup="updateText()">
    <p class="js-text"></p>

    <p>9i</p>
    <h1>Cart Quantity</h1>
    <button onclick="displayCartQuantity()">
        Show Quantity
    </button>
    <button onclick="updateCart(1);">
        Add to cart
    </button>
    <button onclick="updateCart(2);">
        +2
    </button>
    <button onclick="updateCart(3);">
        +3
    </button>
    <button onclick="cartQuantity = 0; console.log(`Cart Quantity reset to: ${cartQuantity}`)">
        Reset cart
    </button>

    <p class="js-cartQuantity"></p>

    <p>9j</p>

    <p>
        <button onclick="calculate('1');">
            1
        </button>
        <button onclick="calculate('2');">
            2
        </button>
        <button onclick="calculate('3');">
            3
        </button>
        <button onclick="calculate('+');">
            +
        </button>
    </p>
    <p>
        <button onclick="calculate('4');">
            4
        </button>
        <button onclick="calculate('5');">
            5
        </button>
        <button onclick="calculate('6');">
            6
        </button>
        <button onclick="calculate('-');">
            -
        </button>
    </p>
    <p>
        <button onclick="calculate('7');">
            7
        </button>
        <button onclick="calculate('8');">
            8
        </button>
        <button onclick="calculate('9');">
            9
        </button>
        <button onclick="calculate('*');">
            *
        </button>
    </p>
    <p>
        <button onclick="calculate('0');">
            0
        </button>
        <button onclick="calculate('.');">
            .
        </button>
        <button onclick="calculation = eval(calculation); displayCalcualtion();">
            =
        </button>
        <button onclick="calculate('/');">
            /
        </button>
    </p>
    <p>
        <button onclick="calculation = ''; displayCalcualtion();">
            Clear
        </button>
    </p>

    <p class="js-calculation"></p>
    <script>

        console.log(document.querySelector('button'));
        document.querySelector('.js-9b').innerHTML = "9b done!";

        function selection(e) {
            document.querySelector('.js-selected').innerHTML = `You selected ${e.target.innerHTML}`;
        }

        function greet() {
            const name = document.getElementById('input').value;
            document.querySelector('.js-greet').innerHTML = `Your name is: ${name}!`;
        }

        function handleSubmitKeydown(event) {
            if(event.key === 'Enter') {
                greet();
            }
        }

          function handleCostKeydown(event) {
            if(event.key === 'Enter') {
                calculateShipping();
            }
        }

         function calculateShipping() {
            const amount = parseFloat(document.querySelector('.js-amount').value)*100;
            if(isNaN(amount) || amount < 0) {
                alert('Please enter a valid amount.');
                return;
            }
            if(amount < 4000) {
                document.querySelector('.js-total').innerHTML = `$${(amount + 1000)/100}`;
            } else {
                document.querySelector('.js-total').innerHTML = `$${amount/100}`;
            }
        }

        function updateText() {
            const inputText = document.querySelector('#input-text').value;
            document.querySelector('.js-text').innerHTML = inputText;
        }

        
        let cartQuantity = localStorage.getItem('cartQuantity') ? parseInt(localStorage.getItem('cartQuantity')) : 0;
        displayCartQuantity();//display cart quantity on page load
        function updateCart(value) {
            if (cartQuantity + value > 10) {
                document.querySelector(".js-cartQuantity").innerHTML = "The cart is full";
                return;
            }else{
                cartQuantity += value;
                displayCartQuantity();
            }
        }

        function displayCartQuantity() {
            document.querySelector(".js-cartQuantity").innerHTML =  `Cart Quantity: ${cartQuantity}`;
            localStorage.setItem('cartQuantity', cartQuantity );
        }

         let calculation = localStorage.getItem('calculation') ? localStorage.getItem('calculation') : "";
         displayCalcualtion();//display calculation on page load
        function calculate(value) {
            calculation += value;
            displayCalcualtion();
        }
        function displayCalcualtion() {
            localStorage.setItem('calculation', calculation);
            document.querySelector('.js-calculation').innerHTML = calculation;
        }
    </script>
    
</body>
</html>